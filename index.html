<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TRIVO Store</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0 15px;
    }
    .seccion { display: none; margin-top: 30px; }
    .menu { margin-top: 20px; text-align: center; }
    .menu button {
      padding: 10px;
      margin: 5px;
      font-weight: bold;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #google_translate_element {
      font-size: 14px;
    }
    header img {
      width: 200px;
      display: block;
      margin: 20px auto 10px auto;
    }
    header h1 {
      text-align: center;
      color: #007bff;
      margin-bottom: 0;
    }
  </style>
  
</head>
<body>

<!-- TRADUCTOR GOOGLE -->
<div id="traductorTrivo" style="position: fixed; top: 15px; left: 15px; z-index: 9999;">
  <div id="google_translate_element" style="border: 2px solid #007bff; padding: 5px 10px; background: white; border-radius: 6px; font-weight: bold;"></div>
</div>

<!-- LOGO Y CABECERA -->
<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Shopping_cart_icon.svg/512px-Shopping_cart_icon.svg.png" alt="Logo TRIVO" />
  <h1>TRIVO Store</h1>
</header>

<!-- MENÚ -->
<div class="menu">
  <button onclick="verSeccion('tienda')">Tienda</button>
  <button onclick="verSeccion('contacto')">Contacto</button>
  <button onclick="verSeccion('categoriasPublicas')">Categorías</button>
  <button onclick="verLogin()">Admin</button>
</div>

<!-- TIENDA (PÚBLICA) -->
<div id="tienda" class="seccion">
  <h2>Productos disponibles</h2>
  <p>Listado de productos al público...</p>
  <!-- CATEGORÍAS PÚBLICAS -->
<div id="categoriasPublicas" class="seccion">
  <h3>Categorías de Productos</h3>
  <div style="display: flex; flex-wrap: wrap; gap: 10px;">
    <div style="background:#e0f7fa;padding:10px;border-radius:8px;">Electrónica</div>
    <div style="background:#f1f8e9;padding:10px;border-radius:8px;">Ropa</div>
    <div style="background:#ffe0b2;padding:10px;border-radius:8px;">Hogar</div>
    <div style="background:#f3e5f5;padding:10px;border-radius:8px;">Salud</div>
    <div style="background:#dcedc8;padding:10px;border-radius:8px;">Automotriz</div>
  </div>
</div>
  
</div>

<!-- CONTACTO -->
<div id="contacto" class="seccion">
  <h2>Formulario de contacto</h2>
  <form>
    <label>Nombre: <input type="text" required></label><br><br>
    <label>Email: <input type="email" required></label><br><br>
    <label>Mensaje:<br><textarea rows="4" required></textarea></label><br><br>
    <button type="submit">Enviar</button>
  </form>
</div>

<!-- PANEL ADMIN (PRIVADO) -->
<div id="adminPanel" class="seccion">
  <h2>Panel Privado del Dueño</h2>
  <button onclick="verSeccion('bodega')">Bodega</button>
  <button onclick="verSeccion('proveedores')">Proveedores</button>
  <button onclick="verSeccion('herramientas')">Herramientas</button>
</div>

<!-- BODEGA -->
<div id="bodega" class="seccion">
  <h3>Bodega / Inventario</h3>
  <p>Aquí puedes subir y gestionar productos.</p>
  <!-- FORMULARIO INTELIGENTE -->
<form id="formulario-producto" onsubmit="agregarProducto(event)" style="margin: 30px auto; max-width: 400px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px #ccc;">
  <input type="text" id="nombre" placeholder="Nombre del producto" required style="margin-bottom: 10px; width: 100%; padding: 10px;">
  <input type="text" id="descripcion" placeholder="Descripción" required style="margin-bottom: 10px; width: 100%; padding: 10px;">
  <input type="number" id="precio" placeholder="Precio USD" required style="margin-bottom: 10px; width: 100%; padding: 10px;">
  <input type="text" id="categoria" placeholder="Categoría del producto (opcional)" style="margin-bottom: 10px; width: 100%; padding: 10px;">
  
  <label>Sube una imagen o pega un enlace:</label><br>
  <input type="file" id="imagenArchivo" accept="image/*" style="margin-bottom: 10px;"><br>
  <input type="url" id="imagenURL" placeholder="URL de la imagen (opcional)" style="margin-bottom: 10px; width: 100%; padding: 10px;"><br>

  <img id="vistaPrevia" src="" alt="Vista previa" style="max-width:150px; display:none; margin-bottom:10px;"><br>

  <button id="botonAgregar" style="width: 100%; padding: 10px; background: green; color: white; border: none; border-radius: 5px;">Agregar Producto</button>
</form>
  <!-- MOSTRAR PRODUCTOS EN BODEGA -->
<h4 style="margin-top: 30px;">Productos cargados desde Firestore:</h4>
<div id="listaProductos" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_AUTH_DOMAIN",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_BUCKET",
    messagingSenderId: "TU_MESSAGING_ID",
    appId: "TU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function cargarProductos() {
    const lista = document.getElementById("listaProductos");
    const productosRef = collection(db, "productos");
    const querySnapshot = await getDocs(productosRef);

    querySnapshot.forEach(doc => {
      const producto = doc.data();
      const div = document.createElement("div");
      div.className = "producto";
      div.style = "border:1px solid #ccc; border-radius:8px; padding:15px; width:200px; text-align:center; background:white;";
      div.innerHTML = `
        <img src="${producto.imagenURL}" alt="${producto.nombre}" style="width:150px; height:auto; border-radius:10px;">
        <h3>${producto.nombre}</h3>
        <p>${producto.descripcion}</p>
        <strong style="color:green;">$${producto.precio}</strong>
        <p><em>${producto.categoria}</em></p>
        <button class="boton-carrito">Agregar al carrito</button>
      `;
      lista.appendChild(div);
    });
  }

  cargarProductos();
</script>

<!-- MOSTRAR PRODUCTOS EN BODEGA -->
<div id="bodega-lista" style="margin-top: 20px;"></div>

<script>
  const productosEjemplo = [
    {
      nombre: "Zapatillas deportivas",
      descripcion: "Perfectas para correr y caminar",
      precio: "$59.99",
      imagen: "https://m.media-amazon.com/images/I/71fw5ZLuCXL._AC_UL1500_.jpg",
      categoria: "Calzado"
    },
    {
      nombre: "Casco de realidad virtual",
      descripcion: "Alta definición e inmersión",
      precio: "$89.99",
      imagen: "https://m.media-amazon.com/images/I/51E3fzqvOLL._AC_SL1000_.jpg",
      categoria: "Tecnología"
    }
  ];

  function mostrarProductosEnBodega() {
    const contenedor = document.getElementById("bodega-lista");
    contenedor.innerHTML = "";

    productosEjemplo.forEach(prod => {
      contenedor.innerHTML += `
        <div style="border:1px solid #ccc; border-radius:10px; padding:15px; margin:10px 0; background:white;">
          <img src="${prod.imagen}" alt="${prod.nombre}" style="width:100px; border-radius:8px;"><br>
          <strong>${prod.nombre}</strong><br>
          ${prod.descripcion}<br>
          <em>${prod.categoria}</em><br>
          <span style="color:green; font-weight:bold;">${prod.precio}</span>
        </div>
      `;
    });
  }

  mostrarProductosEnBodega();
</script>
<div id="listaProductos"></div>
<script>
  const formulario = document.getElementById("formulario-producto");
  const vistaPrevia = document.getElementById("vistaPrevia");
  const imagenArchivo = document.getElementById("imagenArchivo");
  const imagenURL = document.getElementById("imagenURL");

  imagenArchivo.addEventListener("change", function () {
    const archivo = imagenArchivo.files[0];
    if (archivo) {
      const lector = new FileReader();
      lector.onload = function (e) {
        vistaPrevia.src = e.target.result;
        vistaPrevia.style.display = "block";
      };
      lector.readAsDataURL(archivo);
    }
  });

  imagenURL.addEventListener("input", () => {
    const url = imagenURL.value.trim();
    if (url) {
      vistaPrevia.src = url;
      vistaPrevia.style.display = "block";
    } else {
      vistaPrevia.style.display = "none";
    }
  });

  formulario.addEventListener("submit", function (e) {
    e.preventDefault();

    const nombre = document.getElementById("nombre").value;
    const descripcion = document.getElementById("descripcion").value;
    const precio = document.getElementById("precio").value;
    const categoria = document.getElementById("categoria").value || "Otros";

    let imagenSrc = "";
    if (imagenURL.value.trim() !== "") {
      imagenSrc = imagenURL.value.trim();
    } else if (imagenArchivo.files.length > 0) {
      imagenSrc = vistaPrevia.src;
    }

    const productoHTML = `
      <div class="producto" style="border:1px solid #ccc;padding:15px;margin:10px;border-radius:10px;">
        <img src="${imagenSrc}" alt="${nombre}" style="width:100px;display:block;margin-bottom:10px;">
        <h3>${nombre}</h3>
        <p>${descripcion}</p>
        <p><strong>Precio:</strong> $${parseFloat(precio).toFixed(2)} USD</p>
        <p style="font-style:italic;color:green;">Categoría: ${categoria}</p>
      </div>
    `;

    document.getElementById("bodega").insertAdjacentHTML("beforeend", productoHTML);
    formulario.reset();
    vistaPrevia.style.display = "none";
  });
</script>
  <!-- DETECCIÓN AUTOMÁTICA DE CATEGORÍA POR NOMBRE -->
  <h4>Categoría Detectada:</h4>
  <p id="categoriaDetectada" style="font-weight:bold; color:#007bff;">(Esperando entrada...)</p>
</div>

<script>
// Lista básica de palabras clave por categoría
const categorias = {
  'Electrónica': ['tv', 'televisor', 'smartphone', 'laptop', 'audífono', 'tablet'],
  'Ropa': ['camisa', 'pantalón', 'zapatilla', 'abrigo', 'blusa', 'vestido'],
  'Hogar': ['sofá', 'silla', 'mesa', 'almohada', 'cocina'],
  'Salud': ['vitamina', 'termómetro', 'mascarilla', 'suplemento'],
  'Automotriz': ['llanta', 'motor', 'faro', 'aceite', 'batería']
};

// Función para detectar categoría
function detectarCategoriaPorNombre(nombre) {
  let nombreLimpio = nombre.toLowerCase();
  for (let cat in categorias) {
    for (let palabra of categorias[cat]) {
      if (nombreLimpio.includes(palabra)) {
        return cat;
      }
    }
  }
  return 'No detectada';
}

// Detectar en tiempo real
document.getElementById('nombreProducto').addEventListener('input', (e) => {
  const categoria = detectarCategoriaPorNombre(e.target.value);
  document.getElementById('categoriaDetectada').innerText = categoria;
});
</script>

<!-- PROVEEDORES -->
<div id="proveedores" class="seccion">
  <h3>Importar desde proveedores</h3>
  <button onclick="window.open('https://www.1688.com/', '_blank')">1688</button>
<button onclick="window.open('https://www.amazon.com/', '_blank')">Amazon</button>
<button onclick="window.open('https://www.aliexpress.com/', '_blank')">AliExpress</button>
  <div id="resultadoProveedores" style="margin-top: 15px;"></div>
</div>

<!-- HERRAMIENTAS -->
<!-- HERRAMIENTAS DEL DUEÑO CON ENLACES REALES -->
<div id="herramientas" class="seccion">
  <h3>Herramientas del Dueño</h3>
  <ul>
    <li><a href="https://github.com/trivoOwner/Trivo-store" target="_blank">Repositorio en GitHub</a></li>
    <li><a href="https://trivo-store-admin.vercel.app" target="_blank">Panel Admin en Vercel</a></li>
    <li><a href="https://stackblitz.com" target="_blank">Editar código en StackBlitz</a></li>
    <li><a href="https://firebase.google.com" target="_blank">Firebase (Base de datos)</a></li>
    <li><a href="https://imgur.com/upload" target="_blank">Subir imágenes a Imgur</a></li>
  </ul>
</div>

<!-- BLOQUE DE CLAVE -->
<div id="clavePanel" class="seccion" style="margin-top: 30px;">
  <h3>Acceso Privado</h3>
  <input type="password" id="claveInput" placeholder="Ingresa la clave" />
  <button onclick="verificarClave()">Entrar</button>
  <p id="claveMensaje" style="color: red;"></p>
</div>

<!-- SCRIPTS -->
<script>
  function ocultarTodo() {
    document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
  }

  function verSeccion(id) {
    ocultarTodo();
    document.getElementById(id).style.display = 'block';
  }

  function verLogin() {
    ocultarTodo();
    document.getElementById('clavePanel').style.display = 'block';
  }

  function verificarClave() {
    const clave = document.getElementById('claveInput').value;
    const mensaje = document.getElementById('claveMensaje');
    if (clave === "Trivo2025!") {
      document.getElementById('adminPanel').style.display = 'block';
      document.getElementById('bodega').style.display = 'block';
      document.getElementById('proveedores').style.display = 'block';
      document.getElementById('herramientas').style.display = 'block';
      mensaje.innerText = "";
    } else {
      mensaje.innerText = "Clave incorrecta";
    }
  }

  function importarDesde(fuente) {
    const resultado = document.getElementById("resultadoProveedores");
    resultado.innerHTML = `<p>Cargando productos desde <b>${fuente}</b>...</p>`;
    setTimeout(() => {
      resultado.innerHTML = `
        <p><b>Productos importados desde ${fuente}:</b></p>
        <ul>
          <li>Producto A (${fuente})</li>
          <li>Producto B (${fuente})</li>
          <li>Producto C (${fuente})</li>
        </ul>
      `;
    }, 1000);
  }
</script>

<!-- TRADUCTOR GOOGLE -->
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'es',
      includedLanguages: 'es,en,fr,de,it,pt,zh-CN,ja,ko,ru,ar,tr,hi,id,vi,th,pl,nl,sv,no,da,fi,cs,el,he,ro,hu,uk,bg,hr,sk,sl,lt,lv,et,ms,tl',
      layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
    }, 'google_translate_element');
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- BLOQUE NUEVO: ZONA PRIVADA COMPLETA -->
<div id="zonaPrivada" class="seccion">
  <h2 style="color: #007bff;">Zona Privada - Herramientas del Dueño</h2>

  <!-- Accesos rápidos a herramientas -->
  <h3>Plataformas de Trabajo</h3>
  <ul>
    <li><a href="https://github.com/trivoOwner/Trivo-store" target="_blank">GitHub - Código de la Tienda</a></li>
    <li><a href="https://trivo-store-admin.vercel.app" target="_blank">Panel Admin en Vercel</a></li>
    <li><a href="https://stackblitz.com" target="_blank">StackBlitz - Editar Código</a></li>
    <li><a href="https://firebase.google.com" target="_blank">Firebase - Base de Datos</a></li>
    <li><a href="https://imgur.com/upload" target="_blank">Imgur - Subir Imágenes</a></li>
  </ul>

  <!-- Simulación de automatización -->
  <h3>Robot de Subida (Simulado)</h3>
  <button onclick="simularSubida()">Subir producto desde 1688</button>
  <button onclick="simularSubida()">Subir producto desde Amazon</button>
  <button onclick="simularSubida()">Subir producto desde AliExpress</button>
  <div id="resultadoRobot" style="margin-top: 20px;"></div>

  <!-- Categorías automáticas -->
  <h3>Categorías Detectadas</h3>
  <ul id="categoriasAuto">
    <li>Electrónica</li>
    <li>Ropa</li>
    <li>Hogar</li>
    <li>Salud</li>
    <li>Automotriz</li>
  </ul>
</div>

<script>
  function simularSubida() {
    const cont = document.getElementById("resultadoRobot");
    cont.innerHTML = `<p style="color: green;">Producto subido correctamente (modo simulado).</p>`;
    setTimeout(() => cont.innerHTML = "", 3000);
  }
</script>
  <script>
  // Mostrar vista previa de la imagen cargada
  const imagenArchivo = document.getElementById('imagenArchivo');
  const imagenURL = document.getElementById('imagenURL');
  const vistaPrevia = document.getElementById('vistaPrevia');

  imagenArchivo.addEventListener('change', function () {
    const archivo = this.files[0];
    if (archivo) {
      const lector = new FileReader();
      lector.onload = function (e) {
        vistaPrevia.src = e.target.result;
        vistaPrevia.style.display = 'block';
      };
      lector.readAsDataURL(archivo);
    }
  });

  imagenURL.addEventListener('input', function () {
    const url = this.value;
    if (url && url.startsWith('http')) {
      vistaPrevia.src = url;
      vistaPrevia.style.display = 'block';
    }
  });

  // Detección automática de categoría desde el nombre del producto
  const nombreInput = document.getElementById('nombre');
  const categoriaDetectada = document.getElementById('categoriaDetectada');

  nombreInput.addEventListener('input', function () {
    const texto = this.value.toLowerCase();
    let categoria = 'General';

    if (texto.includes('camisa') || texto.includes('blusa')) categoria = 'Ropa';
    else if (texto.includes('tenis') || texto.includes('zapato')) categoria = 'Calzado';
    else if (texto.includes('laptop') || texto.includes('computadora')) categoria = 'Tecnología';
    else if (texto.includes('silla') || texto.includes('mesa')) categoria = 'Muebles';
    else if (texto.includes('reloj')) categoria = 'Accesorios';

    categoriaDetectada.textContent = categoria;
  });
</script>
  <div id="lista-productos" style="margin-top: 20px;"></div>
  <!-- Firebase App (base) -->
<script type="module">
  // Importar funciones desde el SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";

  // Tu configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCFEDVeXYdjQMLKbMoqH8t46umL05mMy2Y",
    authDomain: "trivostore-48031.firebaseapp.com",
    projectId: "trivostore-48031",
    storageBucket: "trivostore-48031.appspot.com",
    messagingSenderId: "470494266050",
    appId: "1:470494266050:web:a5c00ecb3d202b2848715b",
    measurementId: "G-PYP3ZR9742"
  };

  // Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const botonAgregar = document.getElementById('botonAgregar');
botonAgregar.addEventListener('click', async () => {
  const nombre = document.getElementById('nombre').value;
  const descripcion = document.getElementById('descripcion').value;
  const precio = parseFloat(document.getElementById('precio').value);
  const categoria = document.getElementById('categoria').value || 'General';
  const imagenURL = document.getElementById('imagenURL').value;

  if (!nombre || !descripcion || !precio) {
    alert("Por favor completa todos los campos requeridos.");
    return;
  }

  await guardarProducto(nombre, descripcion, precio, categoria, imagenURL);
  alert("Producto guardado exitosamente en Firebase!");
});
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// Inicializar Firestore
const db = getFirestore(app);

// Función para guardar producto
async function guardarProducto(nombre, descripcion, precio, categoria, imagenURL) {
  try {
    const docRef = await addDoc(collection(db, "productos"), {
      nombre,
      descripcion,
      precio,
      categoria,
      imagenURL,
      fecha: new Date()
    });
    console.log("Producto guardado con ID:", docRef.id);
  } catch (e) {
    console.error("Error al guardar producto:", e);
  }
}
  // Evento que detecta clic en el botón y guarda el producto
document.getElementById("botonAgregar").addEventListener("click", async function (e) {
  e.preventDefault();

  const nombre = document.getElementById("nombre").value;
  const descripcion = document.getElementById("descripcion").value;
  const precio = document.getElementById("precio").value;
  const categoria = document.getElementById("categoria").value;
  // Activar robot TRIVO para analizar el producto
const aprobado = robotTrivoAnalizar(nombre, precio);
if (!aprobado) return; // Si no aprueba, se cancela el guardado
  const imagen = imagenURL.value || "sin_imagen";

  await guardarProducto(nombre, descripcion, precio, categoria, imagen);
});
</script>
  </script>
<script type="module">
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";
  import { app } from "./firebaseConfig.js"; // Asegúrate que esta ruta sea correcta

  const db = getFirestore(app);
  const lista = document.getElementById("listaProductos");

  async function mostrarProductos() {
    lista.innerHTML = "<em>Cargando productos...</em>";

    try {
      const querySnapshot = await getDocs(collection(db, "productos"));
      lista.innerHTML = "";

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        lista.innerHTML += `
          <div style="border:1px solid #ccc; padding:10px; margin:10px;">
            <h4>${data.nombre}</h4>
            <p>${data.descripcion}</p>
            <p><strong>Precio:</strong> $${data.precio}</p>
            <p><strong>Categoría:</strong> ${data.categoria}</p>
            <img src="${data.imagenURL}" alt="imagen" style="max-width:100px;">
          </div>
        `;
      });

    } catch (error) {
      lista.innerHTML = "<p style='color:red;'>Error al cargar productos.</p>";
      console.error("Error al obtener productos:", error);
    }
  }

  mostrarProductos();
</script>

</script>
  
<!-- BLOQUE LIMPIO - Robot TRIVO + Guardado en Firebase -->
<div id="robotTrivoPanel" style="position:fixed; bottom:20px; right:20px; background:#111; color:#0f0; padding:15px; border-radius:10px; font-family:monospace; z-index:9999; box-shadow:0 0 15px #0f0;">
  <strong>Robot TRIVO:</strong><br>
  <span id="robotEstado">Conectando...</span><br>
  <span id="robotAccion">Esperando producto...</span><br>
  <span id="robotMoneda">USD: --</span>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCFEDVeXYdjQMLKbMoqH8t46umL05mMy2Y",
    authDomain: "trivostore-48031.firebaseapp.com",
    projectId: "trivostore-48031",
    storageBucket: "trivostore-48031.appspot.com",
    messagingSenderId: "470494266050",
    appId: "1:470494266050:web:a5c00ecb3d202b2848715b",
    measurementId: "G-PYP3ZR9742"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  document.getElementById("robotEstado").innerText = "Conectado a Firebase";
// IA LOCAL: Clasificador de categoría por palabra clave
function detectarCategoriaInteligente(nombreProducto) {
  const nombre = nombreProducto.toLowerCase();

  if (nombre.includes("zapato") || nombre.includes("tenis") || nombre.includes("sandalia")) return "Calzado";
  if (nombre.includes("camisa") || nombre.includes("pantalón") || nombre.includes("blusa") || nombre.includes("ropa")) return "Ropa";
  if (nombre.includes("celular") || nombre.includes("tablet") || nombre.includes("computadora") || nombre.includes("tecnología")) return "Tecnología";
  if (nombre.includes("reloj") || nombre.includes("collar") || nombre.includes("accesorio")) return "Accesorios";
  if (nombre.includes("silla") || nombre.includes("mesa") || nombre.includes("hogar")) return "Hogar";

  return "Otros"; // Categoría por defecto
}
  const formulario = document.getElementById("formulario-producto");
  formulario.addEventListener("submit", async function (event) {
    event.preventDefault();

    const nombre = document.getElementById("nombre").value.trim();
    const descripcion = document.getElementById("descripcion").value.trim();
    const precio = parseFloat(document.getElementById("precio").value);
    const nombreProducto = document.getElementById("nombre").value;
const categoria = detectarCategoriaInteligente(nombreProducto);
    const imagenURL = document.getElementById("imagenURL")?.value || "";

    if (!nombre || !descripcion || isNaN(precio)) {
      alert("Completa todos los campos correctamente.");
      return;
    }

    document.getElementById("robotAccion").innerText = "Guardando producto...";

    try {
      await addDoc(collection(db, "productos"), {
        nombre,
        descripcion,
        precio,
        categoria,
        imagenURL,
        fecha: new Date().toISOString()
      });

      alert("Producto guardado exitosamente.");
      document.getElementById("robotAccion").innerText = "Producto guardado correctamente.";
      document.getElementById("robotMoneda").innerText = `USD: $${precio}`;
      formulario.reset();
    } catch (error) {
      console.error("Error al guardar:", error);
      alert("Error al guardar el producto.");
      document.getElementById("robotAccion").innerText = "Error al guardar.";
    }
  });
</script>
<!-- FIN DEL BLOQUE -->
<script>
  // Espera 2.5 segundos y muestra estado conectado con valores simulados
  setTimeout(() => {
    const estado = document.getElementById("robotEstado");
    const accion = document.getElementById("robotAccion");
    const moneda = document.getElementById("robotMoneda");

    if (estado && accion && moneda) {
      estado.innerText = "Robot activo y conectado.";
      accion.innerText = "Producto procesado correctamente.";
      moneda.innerText = "USD: $24.50 | Original: ¥168";
    }
  }, 2500);
</script>
<!-- Mostrar productos sin formulario -->


<script type="module">
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
  const db = getFirestore();

  async function mostrarProductos() {
    const lista = document.getElementById("listaProductos");
    const querySnapshot = await getDocs(collection(db, "productos"));

    if (querySnapshot.empty) {
      lista.innerHTML = "<p>No hay productos para mostrar.</p>";
      return;
    }

    let html = "<h2>Inventario</h2>";
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      html += `
        <div style="border:1px solid #ccc; padding:10px; margin:10px;">
          <strong>${data.nombre}</strong><br>
          Descripción: ${data.descripcion}<br>
          Categoría: ${data.categoria}<br>
          Precio: ${data.precio} USD<br>
          <img src="${data.imagenURL}" alt="${data.nombre}" style="max-width:100px;"><br>
          Fecha: ${new Date(data.fecha).toLocaleString()}
        </div>
      `;
    });

    lista.innerHTML = html;
  }

  mostrarProductos();
</script>
  <!-- Aquí va el bloque para conectar con Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_DOMINIO.firebaseapp.com",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_BUCKET.appspot.com",
    messagingSenderId: "TU_SENDER_ID",
    appId: "TU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Aquí puedes leer y mostrar datos desde Firebase si lo deseas
</script>

<!-- Aquí va el bloque para conectar con Firebase -->
<script type="module">
  // CONFIGURACIÓN FIREBASE (usa tus datos reales)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
  apiKey: "AIzaSyCFEDVEXydQjMLkbMogH8t46umL05mMy2Y",
  authDomain: "trivostore-48031.firebaseapp.com",
  projectId: "trivostore-48031",
  storageBucket: "trivostore-48031.appspot.com",
  messagingSenderId: "470494266050",
  appId: "1:470494266050:web:a5c00eb3d202b2b48715b"
};

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
// Obtener la referencia al contenedor de productos
const lista = document.getElementById("listaProductos");

// Función para mostrar los productos desde Firestore
async function mostrarProductos() {
  const querySnapshot = await getDocs(collection(db, "productos"));
  let html = "";

  querySnapshot.forEach((doc) => {
    const data = doc.data();
    html += `
      <div style="border:1px solid #ccc; padding:10px; margin:10px; max-width:300px;">
        <strong>${data.nombre}</strong><br>
        Descripción: ${data.descripcion}<br>
        Categoría: <em>${data.categoria}</em><br>
        Precio: <span style="color:green;">$${data.precio}</span><br>
        <img src="${data.imagenURL}" alt="${data.nombre}" style="max-width:100px;"><br>
        Fecha: ${new Date(data.fecha).toLocaleString()}
      </div>
    `;
  });

  lista.innerHTML = html;
}

// Llamar a la función cuando se cargue el módulo
mostrarProductos();
  // Puedes añadir lógica para leer o mostrar datos aquí también si necesitas
</script>
<!-- Conexión con Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_AUTH_DOMAIN",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_BUCKET",
    messagingSenderId: "TU_MESSAGING_ID",
    appId: "TU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Aquí puedes usar la variable `db` para leer o escribir datos
</script>
  <script>
// IA LOCAL: Clasificador de categoría por palabra clave
function detectarCategoriaInteligente(nombreProducto) {
  const nombre = nombreProducto.toLowerCase();

  if (nombre.includes("zapato") || nombre.includes("tenis") || nombre.includes("sandalia")) return "Calzado";
  if (nombre.includes("camisa") || nombre.includes("pantalón") || nombre.includes("blusa") || nombre.includes("ropa")) return "Ropa";
  if (nombre.includes("celular") || nombre.includes("tablet") || nombre.includes("computadora") || nombre.includes("tecnología")) return "Tecnología";
  if (nombre.includes("reloj") || nombre.includes("collar") || nombre.includes("accesorio")) return "Accesorios";
  if (nombre.includes("silla") || nombre.includes("mesa") || nombre.includes("hogar")) return "Hogar";
  
  return "Otros"; // Categoría por defecto
}
</script>
  <script>
  let plataformaActiva = 'firebase'; // Valor inicial

  const firebaseBtn = document.getElementById('firebaseBtn');
  const supabaseBtn = document.getElementById('supabaseBtn');
  const statusPlataforma = document.createElement('div');

  statusPlataforma.id = "plataformaStatus";
  statusPlataforma.style.fontWeight = "bold";
  statusPlataforma.style.marginTop = "10px";
  document.querySelector('.platform-toggle').after(statusPlataforma);

  function actualizarEstado() {
    firebaseBtn.disabled = plataformaActiva === 'firebase';
    supabaseBtn.disabled = plataformaActiva === 'supabase';
    statusPlataforma.innerText = `Plataforma activa: ${plataformaActiva.charAt(0).toUpperCase() + plataformaActiva.slice(1)}`;
  }

  firebaseBtn.addEventListener('click', () => {
    plataformaActiva = 'firebase';
    actualizarEstado();
  });

  supabaseBtn.addEventListener('click', () => {
    plataformaActiva = 'supabase';
    actualizarEstado();
  });

  actualizarEstado();
</script>
  <!-- BOTONES DE CONTROL DE PLATAFORMA -->
<div style="margin: 20px 0; text-align: center;">
  <button onclick="activarFirebase()" style="padding:10px 20px; margin-right:10px;">Usar Firebase</button>
  <button onclick="activarSupabase()" style="padding:10px 20px;">Usar Supabase</button>
  <p id="estadoPlataforma" style="margin-top:10px; font-weight:bold;"></p>
</div>

<script>
// Estado actual (por defecto Firebase)
let plataformaActiva = "firebase";

// Función para activar Firebase
function activarFirebase() {
  plataformaActiva = "firebase";
  document.getElementById("estadoPlataforma").innerText = "Plataforma activa: Firebase";
  console.log("Firebase activado");
  // Aquí llamas tu función de subida Firebase si deseas automatizar
}

// Función para activar Supabase
function activarSupabase() {
  plataformaActiva = "supabase";
  document.getElementById("estadoPlataforma").innerText = "Plataforma activa: Supabase";
  console.log("Supabase activado");
  // Aquí llamas tu función de subida Supabase si deseas automatizar
}

// Ejemplo de cómo usar la plataforma seleccionada en una función común
function subirProducto(producto) {
  if (plataformaActiva === "firebase") {
    subirAFirebase(producto);
  } else if (plataformaActiva === "supabase") {
    subirASupabase(producto);
  }
}

// Lógica simulada de envío a cada plataforma
function subirAFirebase(producto) {
  console.log("Producto enviado a Firebase:", producto);
}

function subirASupabase(producto) {
  console.log("Producto enviado a Supabase:", producto);
}
</script>
  <!-- Botones para seleccionar la plataforma -->
<div class="platform-toggle">
  <button id="firebaseBtn">Activar Firebase</button>
  <button id="supabaseBtn">Activar Supabase</button>
</div>

<!-- Formulario de productos -->
<form id="productForm">
  <div>
    <label for="nombre">Nombre del Producto:</label>
    <input type="text" id="nombre" required>
  </div>
  <div>
    <label for="descripcion">Descripción:</label>
    <input type="text" id="descripcion" required>
  </div>
  <div>
    <label for="precio">Precio:</label>
    <input type="number" id="precio" required>
  </div>
  <div>
    <label for="categoria">Categoría:</label>
    <input type="text" id="categoria" required>
  </div>
  <div>
    <label for="imagenURL">URL de la Imagen:</label>
    <input type="url" id="imagenURL" required>
  </div>
  <button type="submit">Subir Producto</button>
</form>

<div id="status"></div>

<script>
  // Configuración de Firebase
  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_AUTH_DOMAIN",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_STORAGE_BUCKET",
    messagingSenderId: "TU_MESSAGING_SENDER_ID",
    appId: "TU_APP_ID"
  };

  // Inicializar Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Configuración de Supabase
  const supabaseUrl = 'https://TU_SUPABASE_URL.supabase.co';
  const supabaseKey = 'TU_SUPABASE_ANON_KEY';
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  // Estado de la plataforma activa
  let activePlatform = null;

  // Referencias a los botones
  const firebaseBtn = document.getElementById('firebaseBtn');
  const supabaseBtn = document.getElementById('supabaseBtn');
  const statusDiv = document.getElementById('status');

  // Función para actualizar el estado de los botones
  function updateButtons() {
    firebaseBtn.classList.remove('active');
    supabaseBtn.classList.remove('active');
    if (activePlatform === 'firebase') {
      firebaseBtn.classList.add('active');
      statusDiv.textContent = 'Firebase está activo.';
    } else if (activePlatform === 'supabase') {
      supabaseBtn.classList.add('active');
      statusDiv.textContent = 'Supabase está activo.';
    } else {
      statusDiv.textContent = 'Ninguna plataforma está activa.';
    }
  }

  // Event listeners para los botones
  firebaseBtn.addEventListener('click', () => {
    activePlatform = activePlatform === 'firebase' ? null : 'firebase';
    updateButtons();
  });

  supabaseBtn.addEventListener('click', () => {
    activePlatform = activePlatform === 'supabase' ? null : 'supabase';
    updateButtons();
  });

  // Manejo del formulario
  const productForm = document.getElementById('productForm');
  productForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const nombre = document.getElementById('nombre').value.trim();
    const descripcion = document.getElementById('descripcion').value.trim();
    const precio = parseFloat(document.getElementById('precio').value);
    const categoria = document.getElementById('categoria').value.trim();
    const imagenURL = document.getElementById('imagenURL').value.trim();
    const creado_en = new Date().toISOString();

    if (!nombre || !descripcion || isNaN(precio) || !categoria || !imagenURL) {
      statusDiv.textContent = 'Por favor, completa todos los campos correctamente.';
      return;
    }

    const producto = { nombre, descripcion, precio, categoria, imagenURL, creado_en };

    try {
      if (activePlatform === 'firebase') {
        await db.collection('productos').add(producto);
        statusDiv.textContent = 'Producto subido a Firebase exitosamente.';
      } else if (activePlatform === 'supabase') {
        const { error } = await supabase.from('productos').insert([producto]);
        if (error) throw error;
        statusDiv.textContent = 'Producto subido a Supabase exitosamente.';
      } else {
        statusDiv.textContent = 'Por favor, selecciona una plataforma antes de subir el producto.';
      }
    } catch (error) {
      console.error(error);
      statusDiv.textContent = 'Ocurrió un error al subir el producto.';
    }

    productForm.reset();
  });

  // Inicializar el estado de los botones
  updateButtons();
</script>
</body>
</html>

