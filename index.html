<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TRIVO Store</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0 15px;
    }
    .seccion { display: none; margin-top: 30px; }
    .menu { margin-top: 20px; text-align: center; }
    .menu button {
      padding: 10px;
      margin: 5px;
      font-weight: bold;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #google_translate_element {
      font-size: 14px;
    }
    header img {
      width: 200px;
      display: block;
      margin: 20px auto 10px auto;
    }
    header h1 {
      text-align: center;
      color: #007bff;
      margin-bottom: 0;
    }
  </style>
  <!-- Firebase App (modular) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCFEDVeXYdjQMLKbMoqH8t46umL05mMy2Y",
    authDomain: "trivostore-48031.firebaseapp.com",
    projectId: "trivostore-48031",
    storageBucket: "trivostore-48031.appspot.com",
    messagingSenderId: "470494266050",
    appId: "1:470494266050:web:a5c00ecb3d202b2848715b",
    measurementId: "G-PYP3ZR9742"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
</head>
<body>

<!-- TRADUCTOR GOOGLE -->
<div id="traductorTrivo" style="position: fixed; top: 15px; left: 15px; z-index: 9999;">
  <div id="google_translate_element" style="border: 2px solid #007bff; padding: 5px 10px; background: white; border-radius: 6px; font-weight: bold;"></div>
</div>

<!-- LOGO Y CABECERA -->
<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Shopping_cart_icon.svg/512px-Shopping_cart_icon.svg.png" alt="Logo TRIVO" />
  <h1>TRIVO Store</h1>
</header>

<!-- MENÚ -->
<div class="menu">
  <button onclick="verSeccion('tienda')">Tienda</button>
  <button onclick="verSeccion('contacto')">Contacto</button>
  <button onclick="verSeccion('categoriasPublicas')">Categorías</button>
  <button onclick="verLogin()">Admin</button>
</div>

<!-- TIENDA (PÚBLICA) -->
<div id="tienda" class="seccion">
  <h2>Productos disponibles</h2>
  <p>Listado de productos al público...</p>
  <!-- CATEGORÍAS PÚBLICAS -->
<div id="categoriasPublicas" class="seccion">
  <h3>Categorías de Productos</h3>
  <div style="display: flex; flex-wrap: wrap; gap: 10px;">
    <div style="background:#e0f7fa;padding:10px;border-radius:8px;">Electrónica</div>
    <div style="background:#f1f8e9;padding:10px;border-radius:8px;">Ropa</div>
    <div style="background:#ffe0b2;padding:10px;border-radius:8px;">Hogar</div>
    <div style="background:#f3e5f5;padding:10px;border-radius:8px;">Salud</div>
    <div style="background:#dcedc8;padding:10px;border-radius:8px;">Automotriz</div>
  </div>
</div>
  
</div>

<!-- CONTACTO -->
<div id="contacto" class="seccion">
  <h2>Formulario de contacto</h2>
  <form>
    <label>Nombre: <input type="text" required></label><br><br>
    <label>Email: <input type="email" required></label><br><br>
    <label>Mensaje:<br><textarea rows="4" required></textarea></label><br><br>
    <button type="submit">Enviar</button>
  </form>
</div>

<!-- PANEL ADMIN (PRIVADO) -->
<div id="adminPanel" class="seccion">
  <h2>Panel Privado del Dueño</h2>
  <button onclick="verSeccion('bodega')">Bodega</button>
  <button onclick="verSeccion('proveedores')">Proveedores</button>
  <button onclick="verSeccion('herramientas')">Herramientas</button>
</div>

<!-- BODEGA -->
<div id="bodega" class="seccion">
  <h3>Bodega / Inventario</h3>
  <p>Aquí puedes subir y gestionar productos.</p>
  <!-- FORMULARIO INTELIGENTE -->
<form id="formulario-producto" onsubmit="agregarProducto(event)" style="margin: 30px auto; max-width: 400px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px #ccc;">
  <input type="text" id="nombre" placeholder="Nombre del producto" required style="margin-bottom: 10px; width: 100%; padding: 10px;">
  <input type="text" id="descripcion" placeholder="Descripción" required style="margin-bottom: 10px; width: 100%; padding: 10px;">
  <input type="number" id="precio" placeholder="Precio USD" required style="margin-bottom: 10px; width: 100%; padding: 10px;">
  <input type="text" id="categoria" placeholder="Categoría del producto (opcional)" style="margin-bottom: 10px; width: 100%; padding: 10px;">
  
  <label>Sube una imagen o pega un enlace:</label><br>
  <input type="file" id="imagenArchivo" accept="image/*" style="margin-bottom: 10px;"><br>
  <input type="url" id="imagenURL" placeholder="URL de la imagen (opcional)" style="margin-bottom: 10px; width: 100%; padding: 10px;"><br>

  <img id="vistaPrevia" src="" alt="Vista previa" style="max-width:150px; display:none; margin-bottom:10px;"><br>

  <button id="botonAgregar" style="width: 100%; padding: 10px; background: green; color: white; border: none; border-radius: 5px;">Agregar Producto</button>
</form>
<script>
  const formulario = document.getElementById("formulario-producto");
  const vistaPrevia = document.getElementById("vistaPrevia");
  const imagenArchivo = document.getElementById("imagenArchivo");
  const imagenURL = document.getElementById("imagenURL");

  imagenArchivo.addEventListener("change", function () {
    const archivo = imagenArchivo.files[0];
    if (archivo) {
      const lector = new FileReader();
      lector.onload = function (e) {
        vistaPrevia.src = e.target.result;
        vistaPrevia.style.display = "block";
      };
      lector.readAsDataURL(archivo);
    }
  });

  imagenURL.addEventListener("input", () => {
    const url = imagenURL.value.trim();
    if (url) {
      vistaPrevia.src = url;
      vistaPrevia.style.display = "block";
    } else {
      vistaPrevia.style.display = "none";
    }
  });

  formulario.addEventListener("submit", function (e) {
    e.preventDefault();

    const nombre = document.getElementById("nombre").value;
    const descripcion = document.getElementById("descripcion").value;
    const precio = document.getElementById("precio").value;
    const categoria = document.getElementById("categoria").value || "Otros";

    let imagenSrc = "";
    if (imagenURL.value.trim() !== "") {
      imagenSrc = imagenURL.value.trim();
    } else if (imagenArchivo.files.length > 0) {
      imagenSrc = vistaPrevia.src;
    }

    const productoHTML = `
      <div class="producto" style="border:1px solid #ccc;padding:15px;margin:10px;border-radius:10px;">
        <img src="${imagenSrc}" alt="${nombre}" style="width:100px;display:block;margin-bottom:10px;">
        <h3>${nombre}</h3>
        <p>${descripcion}</p>
        <p><strong>Precio:</strong> $${parseFloat(precio).toFixed(2)} USD</p>
        <p style="font-style:italic;color:green;">Categoría: ${categoria}</p>
      </div>
    `;

    document.getElementById("bodega").insertAdjacentHTML("beforeend", productoHTML);
    formulario.reset();
    vistaPrevia.style.display = "none";
  });
</script>
  <!-- DETECCIÓN AUTOMÁTICA DE CATEGORÍA POR NOMBRE -->
  <h4>Categoría Detectada:</h4>
  <p id="categoriaDetectada" style="font-weight:bold; color:#007bff;">(Esperando entrada...)</p>
</div>

<script>
// Lista básica de palabras clave por categoría
const categorias = {
  'Electrónica': ['tv', 'televisor', 'smartphone', 'laptop', 'audífono', 'tablet'],
  'Ropa': ['camisa', 'pantalón', 'zapatilla', 'abrigo', 'blusa', 'vestido'],
  'Hogar': ['sofá', 'silla', 'mesa', 'almohada', 'cocina'],
  'Salud': ['vitamina', 'termómetro', 'mascarilla', 'suplemento'],
  'Automotriz': ['llanta', 'motor', 'faro', 'aceite', 'batería']
};

// Función para detectar categoría
function detectarCategoriaPorNombre(nombre) {
  let nombreLimpio = nombre.toLowerCase();
  for (let cat in categorias) {
    for (let palabra of categorias[cat]) {
      if (nombreLimpio.includes(palabra)) {
        return cat;
      }
    }
  }
  return 'No detectada';
}

// Detectar en tiempo real
document.getElementById('nombreProducto').addEventListener('input', (e) => {
  const categoria = detectarCategoriaPorNombre(e.target.value);
  document.getElementById('categoriaDetectada').innerText = categoria;
});
</script>

<!-- PROVEEDORES -->
<div id="proveedores" class="seccion">
  <h3>Importar desde proveedores</h3>
  <button onclick="window.open('https://www.1688.com/', '_blank')">1688</button>
<button onclick="window.open('https://www.amazon.com/', '_blank')">Amazon</button>
<button onclick="window.open('https://www.aliexpress.com/', '_blank')">AliExpress</button>
  <div id="resultadoProveedores" style="margin-top: 15px;"></div>
</div>

<!-- HERRAMIENTAS -->
<!-- HERRAMIENTAS DEL DUEÑO CON ENLACES REALES -->
<div id="herramientas" class="seccion">
  <h3>Herramientas del Dueño</h3>
  <ul>
    <li><a href="https://github.com/trivoOwner/Trivo-store" target="_blank">Repositorio en GitHub</a></li>
    <li><a href="https://trivo-store-admin.vercel.app" target="_blank">Panel Admin en Vercel</a></li>
    <li><a href="https://stackblitz.com" target="_blank">Editar código en StackBlitz</a></li>
    <li><a href="https://firebase.google.com" target="_blank">Firebase (Base de datos)</a></li>
    <li><a href="https://imgur.com/upload" target="_blank">Subir imágenes a Imgur</a></li>
  </ul>
</div>

<!-- BLOQUE DE CLAVE -->
<div id="clavePanel" class="seccion" style="margin-top: 30px;">
  <h3>Acceso Privado</h3>
  <input type="password" id="claveInput" placeholder="Ingresa la clave" />
  <button onclick="verificarClave()">Entrar</button>
  <p id="claveMensaje" style="color: red;"></p>
</div>

<!-- SCRIPTS -->
<script>
  function ocultarTodo() {
    document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
  }

  function verSeccion(id) {
    ocultarTodo();
    document.getElementById(id).style.display = 'block';
  }

  function verLogin() {
    ocultarTodo();
    document.getElementById('clavePanel').style.display = 'block';
  }

  function verificarClave() {
    const clave = document.getElementById('claveInput').value;
    const mensaje = document.getElementById('claveMensaje');
    if (clave === "Trivo2025!") {
      document.getElementById('adminPanel').style.display = 'block';
      document.getElementById('bodega').style.display = 'block';
      document.getElementById('proveedores').style.display = 'block';
      document.getElementById('herramientas').style.display = 'block';
      mensaje.innerText = "";
    } else {
      mensaje.innerText = "Clave incorrecta";
    }
  }

  function importarDesde(fuente) {
    const resultado = document.getElementById("resultadoProveedores");
    resultado.innerHTML = `<p>Cargando productos desde <b>${fuente}</b>...</p>`;
    setTimeout(() => {
      resultado.innerHTML = `
        <p><b>Productos importados desde ${fuente}:</b></p>
        <ul>
          <li>Producto A (${fuente})</li>
          <li>Producto B (${fuente})</li>
          <li>Producto C (${fuente})</li>
        </ul>
      `;
    }, 1000);
  }
</script>

<!-- TRADUCTOR GOOGLE -->
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'es',
      includedLanguages: 'es,en,fr,de,it,pt,zh-CN,ja,ko,ru,ar,tr,hi,id,vi,th,pl,nl,sv,no,da,fi,cs,el,he,ro,hu,uk,bg,hr,sk,sl,lt,lv,et,ms,tl',
      layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
    }, 'google_translate_element');
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- BLOQUE NUEVO: ZONA PRIVADA COMPLETA -->
<div id="zonaPrivada" class="seccion">
  <h2 style="color: #007bff;">Zona Privada - Herramientas del Dueño</h2>

  <!-- Accesos rápidos a herramientas -->
  <h3>Plataformas de Trabajo</h3>
  <ul>
    <li><a href="https://github.com/trivoOwner/Trivo-store" target="_blank">GitHub - Código de la Tienda</a></li>
    <li><a href="https://trivo-store-admin.vercel.app" target="_blank">Panel Admin en Vercel</a></li>
    <li><a href="https://stackblitz.com" target="_blank">StackBlitz - Editar Código</a></li>
    <li><a href="https://firebase.google.com" target="_blank">Firebase - Base de Datos</a></li>
    <li><a href="https://imgur.com/upload" target="_blank">Imgur - Subir Imágenes</a></li>
  </ul>

  <!-- Simulación de automatización -->
  <h3>Robot de Subida (Simulado)</h3>
  <button onclick="simularSubida()">Subir producto desde 1688</button>
  <button onclick="simularSubida()">Subir producto desde Amazon</button>
  <button onclick="simularSubida()">Subir producto desde AliExpress</button>
  <div id="resultadoRobot" style="margin-top: 20px;"></div>

  <!-- Categorías automáticas -->
  <h3>Categorías Detectadas</h3>
  <ul id="categoriasAuto">
    <li>Electrónica</li>
    <li>Ropa</li>
    <li>Hogar</li>
    <li>Salud</li>
    <li>Automotriz</li>
  </ul>
</div>

<script>
  function simularSubida() {
    const cont = document.getElementById("resultadoRobot");
    cont.innerHTML = `<p style="color: green;">Producto subido correctamente (modo simulado).</p>`;
    setTimeout(() => cont.innerHTML = "", 3000);
  }
</script>
  <script>
  // Mostrar vista previa de la imagen cargada
  const imagenArchivo = document.getElementById('imagenArchivo');
  const imagenURL = document.getElementById('imagenURL');
  const vistaPrevia = document.getElementById('vistaPrevia');

  imagenArchivo.addEventListener('change', function () {
    const archivo = this.files[0];
    if (archivo) {
      const lector = new FileReader();
      lector.onload = function (e) {
        vistaPrevia.src = e.target.result;
        vistaPrevia.style.display = 'block';
      };
      lector.readAsDataURL(archivo);
    }
  });

  imagenURL.addEventListener('input', function () {
    const url = this.value;
    if (url && url.startsWith('http')) {
      vistaPrevia.src = url;
      vistaPrevia.style.display = 'block';
    }
  });

  // Detección automática de categoría desde el nombre del producto
  const nombreInput = document.getElementById('nombre');
  const categoriaDetectada = document.getElementById('categoriaDetectada');

  nombreInput.addEventListener('input', function () {
    const texto = this.value.toLowerCase();
    let categoria = 'General';

    if (texto.includes('camisa') || texto.includes('blusa')) categoria = 'Ropa';
    else if (texto.includes('tenis') || texto.includes('zapato')) categoria = 'Calzado';
    else if (texto.includes('laptop') || texto.includes('computadora')) categoria = 'Tecnología';
    else if (texto.includes('silla') || texto.includes('mesa')) categoria = 'Muebles';
    else if (texto.includes('reloj')) categoria = 'Accesorios';

    categoriaDetectada.textContent = categoria;
  });
</script>
  <!-- Firebase App (base) -->
<script type="module">
  // Importar funciones desde el SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";

  // Tu configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCFEDVeXYdjQMLKbMoqH8t46umL05mMy2Y",
    authDomain: "trivostore-48031.firebaseapp.com",
    projectId: "trivostore-48031",
    storageBucket: "trivostore-48031.appspot.com",
    messagingSenderId: "470494266050",
    appId: "1:470494266050:web:a5c00ecb3d202b2848715b",
    measurementId: "G-PYP3ZR9742"
  };

  // Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const botonAgregar = document.getElementById('botonAgregar');
botonAgregar.addEventListener('click', async () => {
  const nombre = document.getElementById('nombre').value;
  const descripcion = document.getElementById('descripcion').value;
  const precio = parseFloat(document.getElementById('precio').value);
  const categoria = document.getElementById('categoria').value || 'General';
  const imagenURL = document.getElementById('imagenURL').value;

  if (!nombre || !descripcion || !precio) {
    alert("Por favor completa todos los campos requeridos.");
    return;
  }

  await guardarProducto(nombre, descripcion, precio, categoria, imagenURL);
  alert("Producto guardado exitosamente en Firebase!");
});
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// Inicializar Firestore
const db = getFirestore(app);

// Función para guardar producto
async function guardarProducto(nombre, descripcion, precio, categoria, imagenURL) {
  try {
    const docRef = await addDoc(collection(db, "productos"), {
      nombre,
      descripcion,
      precio,
      categoria,
      imagenURL,
      fecha: new Date()
    });
    console.log("Producto guardado con ID:", docRef.id);
  } catch (e) {
    console.error("Error al guardar producto:", e);
  }
}
  // Evento que detecta clic en el botón y guarda el producto
document.getElementById("botonAgregar").addEventListener("click", async function (e) {
  e.preventDefault();

  const nombre = document.getElementById("nombre").value;
  const descripcion = document.getElementById("descripcion").value;
  const precio = document.getElementById("precio").value;
  const categoria = document.getElementById("categoria").value;
  const imagen = imagenURL.value || "sin_imagen";

  await guardarProducto(nombre, descripcion, precio, categoria, imagen);
});
</script>
  <script type="module">
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
  
  const db = getFirestore();

  async function guardarProducto(nombre, descripcion, precioLocal, categoria, imagenURL, moneda = "CNY") {
    const marcasProhibidas = ["nike", "adidas", "apple", "samsung", "gucci", "sony", "lenovo", "hp"];
    const nombreMin = nombre.toLowerCase();

    const contieneMarca = marcasProhibidas.some(marca => nombreMin.includes(marca));
    if (contieneMarca) {
      alert("Este producto contiene una marca registrada y no será subido.");
      return;
    }

    const tipoCambio = 0.14; // CNY a USD estimado
    const precioUSD = parseFloat((precioLocal * tipoCambio).toFixed(2));

    try {
      await addDoc(collection(db, "productos"), {
        nombre,
        descripcion,
        precioLocal: precioLocal + " " + moneda,
        precioUSD: "$" + precioUSD,
        categoria,
        imagenURL,
        fecha: new Date().toISOString()
      });
      alert("Producto guardado exitosamente en Firebase");
    } catch (e) {
      console.error("Error al guardar producto:", e);
    }
  }

  // Conecta este robot con tu formulario
  const formulario = document.getElementById("formulario-producto");
  formulario.addEventListener("submit", function (event) {
    event.preventDefault();
    const nombre = document.getElementById("nombre").value;
    const descripcion = document.getElementById("descripcion").value;
    const precio = parseFloat(document.getElementById("precio").value);
    const categoria = document.getElementById("categoria").value;
    const imagenURL = document.getElementById("imagenURL")?.value || "";

    guardarProducto(nombre, descripcion, precio, categoria, imagenURL);
  });
</script>
</body>
</html>
