<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TRIVO Store</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0 15px;
    }
    .seccion { display: none; margin-top: 30px; }
    .menu { margin-top: 20px; text-align: center; }
    .menu button {
      padding: 10px;
      margin: 5px;
      font-weight: bold;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .platform-toggle {
  margin: 20px 0;
  text-align: center;
}

.platform-toggle button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 10px 16px;
  margin: 5px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 6px;
}

.platform-toggle button.active {
  background-color: #28a745;
}
    #google_translate_element {
      font-size: 14px;
    }
    header img {
      width: 200px;
      display: block;
      margin: 20px auto 10px auto;
    }
    header h1 {
      text-align: center;
      color: #007bff;
      margin-bottom: 0;
    }
  </style>
  
</head>
<body>

<!-- TRADUCTOR GOOGLE -->
<div id="traductorTrivo" style="position: fixed; top: 15px; left: 15px; z-index: 9999;">
  <div id="google_translate_element" style="border: 2px solid #007bff; padding: 5px 10px; background: white; border-radius: 6px; font-weight: bold;"></div>
</div>

<!-- LOGO Y CABECERA -->
<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Shopping_cart_icon.svg/512px-Shopping_cart_icon.svg.png" alt="Logo TRIVO" />
  <h1>TRIVO Store</h1>
</header>

<!-- MEN√ö -->
<div class="menu">
  <button onclick="verSeccion('tienda')">Tienda</button>
  <button onclick="verSeccion('contacto')">Contacto</button>
  <button onclick="verSeccion('categoriasPublicas')">Categor√≠as</button>
  <button onclick="verLogin()">Admin</button>
</div>

<!-- TIENDA (P√öBLICA) -->
<div id="tienda" class="seccion">
  <h2>Productos disponibles</h2>
  <p>Listado de productos al p√∫blico...</p>
  <!-- CATEGOR√çAS P√öBLICAS -->
<div id="categoriasPublicas" class="seccion">
  <h3>Categor√≠as de Productos</h3>
  <div style="display: flex; flex-wrap: wrap; gap: 10px;">
    <div style="background:#e0f7fa;padding:10px;border-radius:8px;">Electr√≥nica</div>
    <div style="background:#f1f8e9;padding:10px;border-radius:8px;">Ropa</div>
    <div style="background:#ffe0b2;padding:10px;border-radius:8px;">Hogar</div>
    <div style="background:#f3e5f5;padding:10px;border-radius:8px;">Salud</div>
    <div style="background:#dcedc8;padding:10px;border-radius:8px;">Automotriz</div>
  </div>
</div>
  
</div>

<!-- CONTACTO -->
<div id="contacto" class="seccion">
  <h2>Formulario de contacto</h2>
  <form>
    <label>Nombre: <input type="text" required></label><br><br>
    <label>Email: <input type="email" required></label><br><br>
    <label>Mensaje:<br><textarea rows="4" required></textarea></label><br><br>
    <button type="submit">Enviar</button>
  </form>
</div>

<!-- PANEL ADMIN (PRIVADO) -->
<div id="adminPanel" class="seccion">
  <h2>Panel Privado del Due√±o</h2>
  <button onclick="verSeccion('bodega')">Bodega</button>
  <button onclick="verSeccion('proveedores')">Proveedores</button>
  <button onclick="verSeccion('herramientas')">Herramientas</button>
</div>






</script>

<script>
  const formulario = document.getElementById("formulario-producto");
  const vistaPrevia = document.getElementById("vistaPrevia");
  const imagenArchivo = document.getElementById("imagenArchivo");
  const imagenURL = document.getElementById("imagenURL");

  imagenArchivo.addEventListener("change", function () {
    const archivo = imagenArchivo.files[0];
    if (archivo) {
      const lector = new FileReader();
      lector.onload = function (e) {
        vistaPrevia.src = e.target.result;
        vistaPrevia.style.display = "block";
      };
      lector.readAsDataURL(archivo);
    }
  });

  imagenURL.addEventListener("input", () => {
    const url = imagenURL.value.trim();
    if (url) {
      vistaPrevia.src = url;
      vistaPrevia.style.display = "block";
    } else {
      vistaPrevia.style.display = "none";
    }
  });

  
    
  });
</script>
  <!-- DETECCI√ìN AUTOM√ÅTICA DE CATEGOR√çA POR NOMBRE -->
  <h4>Categor√≠a Detectada:</h4>
  <p id="categoriaDetectada" style="font-weight:bold; color:#007bff;">(Esperando entrada...)</p>
</div>

<script>
// Lista b√°sica de palabras clave por categor√≠a
const categorias = {
  'Electr√≥nica': ['tv', 'televisor', 'smartphone', 'laptop', 'aud√≠fono', 'tablet'],
  'Ropa': ['camisa', 'pantal√≥n', 'zapatilla', 'abrigo', 'blusa', 'vestido'],
  'Hogar': ['sof√°', 'silla', 'mesa', 'almohada', 'cocina'],
  'Salud': ['vitamina', 'term√≥metro', 'mascarilla', 'suplemento'],
  'Automotriz': ['llanta', 'motor', 'faro', 'aceite', 'bater√≠a']
};

// Funci√≥n para detectar categor√≠a
function detectarCategoriaPorNombre(nombre) {
  let nombreLimpio = nombre.toLowerCase();
  for (let cat in categorias) {
    for (let palabra of categorias[cat]) {
      if (nombreLimpio.includes(palabra)) {
        return cat;
      }
    }
  }
  return 'No detectada';
}

// Detectar en tiempo real
document.getElementById('nombreProducto').addEventListener('input', (e) => {
  const categoria = detectarCategoriaPorNombre(e.target.value);
  document.getElementById('categoriaDetectada').innerText = categoria;
});
</script>

<!-- PROVEEDORES -->
<div id="proveedores" class="seccion">
  <h3>Importar desde proveedores</h3>
  <button onclick="window.open('https://www.1688.com/', '_blank')">1688</button>
<button onclick="window.open('https://www.amazon.com/', '_blank')">Amazon</button>
<button onclick="window.open('https://www.aliexpress.com/', '_blank')">AliExpress</button>
  <div id="resultadoProveedores" style="margin-top: 15px;"></div>
</div>

<!-- HERRAMIENTAS -->
<!-- HERRAMIENTAS DEL DUE√ëO CON ENLACES REALES -->
<div id="herramientas" class="seccion">
  <h3>Herramientas del Due√±o</h3>
  <ul>
    <li><a href="https://github.com/trivoOwner/Trivo-store" target="_blank">Repositorio en GitHub</a></li>
    <li><a href="https://trivo-store-admin.vercel.app" target="_blank">Panel Admin en Vercel</a></li>
    <li><a href="https://stackblitz.com" target="_blank">Editar c√≥digo en StackBlitz</a></li>
    
    <li><a href="https://imgur.com/upload" target="_blank">Subir im√°genes a Imgur</a></li>
  </ul>
</div>

<!-- BLOQUE DE CLAVE -->
<div id="clavePanel" class="seccion" style="margin-top: 30px;">
  <h3>Acceso Privado</h3>
  <input type="password" id="claveInput" placeholder="Ingresa la clave" />
  <button onclick="verificarClave()">Entrar</button>
  <p id="claveMensaje" style="color: red;"></p>
</div>

<!-- SCRIPTS -->
<script>
  function ocultarTodo() {
    document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
  }

  function verSeccion(id) {
    ocultarTodo();
    document.getElementById(id).style.display = 'block';
  }

  function verLogin() {
    ocultarTodo();
    document.getElementById('clavePanel').style.display = 'block';
  }

  function verificarClave() {
    const clave = document.getElementById('claveInput').value;
    const mensaje = document.getElementById('claveMensaje');
    if (clave === "Trivo2025!") {
      document.getElementById('adminPanel').style.display = 'block';
      document.getElementById('bodega').style.display = 'block';
      document.getElementById('proveedores').style.display = 'block';
      document.getElementById('herramientas').style.display = 'block';
      mensaje.innerText = "";
    } else {
      mensaje.innerText = "Clave incorrecta";
    }
  }

  function importarDesde(fuente) {
    const resultado = document.getElementById("resultadoProveedores");
    resultado.innerHTML = `<p>Cargando productos desde <b>${fuente}</b>...</p>`;
    setTimeout(() => {
      resultado.innerHTML = `
        <p><b>Productos importados desde ${fuente}:</b></p>
        <ul>
          <li>Producto A (${fuente})</li>
          <li>Producto B (${fuente})</li>
          <li>Producto C (${fuente})</li>
        </ul>
      `;
    }, 1000);
  }
</script>

<!-- TRADUCTOR GOOGLE -->
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'es',
      includedLanguages: 'es,en,fr,de,it,pt,zh-CN,ja,ko,ru,ar,tr,hi,id,vi,th,pl,nl,sv,no,da,fi,cs,el,he,ro,hu,uk,bg,hr,sk,sl,lt,lv,et,ms,tl',
      layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
    }, 'google_translate_element');
  }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<!-- BLOQUE NUEVO: ZONA PRIVADA COMPLETA -->
<div id="zonaPrivada" class="seccion">
  <h2 style="color: #007bff;">Zona Privada - Herramientas del Due√±o</h2>

  <!-- Accesos r√°pidos a herramientas -->
  <h3>Plataformas de Trabajo</h3>
  <ul>
    <li><a href="https://github.com/trivoOwner/Trivo-store" target="_blank">GitHub - C√≥digo de la Tienda</a></li>
    <li><a href="https://trivo-store-admin.vercel.app" target="_blank">Panel Admin en Vercel</a></li>
    <li><a href="https://stackblitz.com" target="_blank">StackBlitz - Editar C√≥digo</a></li>
    
    <li><a href="https://imgur.com/upload" target="_blank">Imgur - Subir Im√°genes</a></li>
  </ul>

  <!-- Simulaci√≥n de automatizaci√≥n -->
  <h3>Robot de Subida (Simulado)</h3>
  <button onclick="simularSubida()">Subir producto desde 1688</button>
  <button onclick="simularSubida()">Subir producto desde Amazon</button>
  <button onclick="simularSubida()">Subir producto desde AliExpress</button>
  <div id="resultadoRobot" style="margin-top: 20px;"></div>

  <!-- Categor√≠as autom√°ticas -->
  <h3>Categor√≠as Detectadas</h3>
  <ul id="categoriasAuto">
    <li>Electr√≥nica</li>
    <li>Ropa</li>
    <li>Hogar</li>
    <li>Salud</li>
    <li>Automotriz</li>
  </ul>
</div>

<script>
  function simularSubida() {
    const cont = document.getElementById("resultadoRobot");
    cont.innerHTML = `<p style="color: green;">Producto subido correctamente (modo simulado).</p>`;
    setTimeout(() => cont.innerHTML = "", 3000);
  }
</script>
  <script>
  // Mostrar vista previa de la imagen cargada
  const imagenArchivo = document.getElementById('imagenArchivo');
  const imagenURL = document.getElementById('imagenURL');
  const vistaPrevia = document.getElementById('vistaPrevia');

  imagenArchivo.addEventListener('change', function () {
    const archivo = this.files[0];
    if (archivo) {
      const lector = new FileReader();
      lector.onload = function (e) {
        vistaPrevia.src = e.target.result;
        vistaPrevia.style.display = 'block';
      };
      lector.readAsDataURL(archivo);
    }
  });

  imagenURL.addEventListener('input', function () {
    const url = this.value;
    if (url && url.startsWith('http')) {
      vistaPrevia.src = url;
      vistaPrevia.style.display = 'block';
    }
  });

  // Detecci√≥n autom√°tica de categor√≠a desde el nombre del producto
  const nombreInput = document.getElementById('nombre');
  const categoriaDetectada = document.getElementById('categoriaDetectada');

  nombreInput.addEventListener('input', function () {
    const texto = this.value.toLowerCase();
    let categoria = 'General';

    if (texto.includes('camisa') || texto.includes('blusa')) categoria = 'Ropa';
    else if (texto.includes('tenis') || texto.includes('zapato')) categoria = 'Calzado';
    else if (texto.includes('laptop') || texto.includes('computadora')) categoria = 'Tecnolog√≠a';
    else if (texto.includes('silla') || texto.includes('mesa')) categoria = 'Muebles';
    else if (texto.includes('reloj')) categoria = 'Accesorios';

    categoriaDetectada.textContent = categoria;
  });
</script>
  <div id="lista-productos" style="margin-top: 20px;"></div>
  
  // Evento que detecta clic en el bot√≥n y guarda el producto
document.getElementById("botonAgregar").addEventListener("click", async function (e) {
  e.preventDefault();

  const nombre = document.getElementById("nombre").value;
  const descripcion = document.getElementById("descripcion").value;
  const precio = document.getElementById("precio").value;
  const categoria = document.getElementById("categoria").value;
  // Activar robot TRIVO para analizar el producto
const aprobado = robotTrivoAnalizar(nombre, precio);
if (!aprobado) return; // Si no aprueba, se cancela el guardado
  const imagen = imagenURL.value || "sin_imagen";

  await guardarProducto(nombre, descripcion, precio, categoria, imagen);
});
</script>
  </script>

      
</script>

</script>
  



// IA LOCAL: Clasificador de categor√≠a por palabra clave
function detectarCategoriaInteligente(nombreProducto) {
  const nombre = nombreProducto.toLowerCase();

  if (nombre.includes("zapato") || nombre.includes("tenis") || nombre.includes("sandalia")) return "Calzado";
  if (nombre.includes("camisa") || nombre.includes("pantal√≥n") || nombre.includes("blusa") || nombre.includes("ropa")) return "Ropa";
  if (nombre.includes("celular") || nombre.includes("tablet") || nombre.includes("computadora") || nombre.includes("tecnolog√≠a")) return "Tecnolog√≠a";
  if (nombre.includes("reloj") || nombre.includes("collar") || nombre.includes("accesorio")) return "Accesorios";
  if (nombre.includes("silla") || nombre.includes("mesa") || nombre.includes("hogar")) return "Hogar";

  return "Otros"; // Categor√≠a por defecto
}
  const formulario = document.getElementById("formulario-producto");
  formulario.addEventListener("submit", async function (event) {
    event.preventDefault();

    const nombre = document.getElementById("nombre").value.trim();
    const descripcion = document.getElementById("descripcion").value.trim();
    const precio = parseFloat(document.getElementById("precio").value);
    const nombreProducto = document.getElementById("nombre").value;
const categoria = detectarCategoriaInteligente(nombreProducto);
    const imagenURL = document.getElementById("imagenURL")?.value || "";

    if (!nombre || !descripcion || isNaN(precio)) {
      alert("Completa todos los campos correctamente.");
      return;
    }

    document.getElementById("robotAccion").innerText = "Guardando producto...";

    try {
      await addDoc(collection(db, "productos"), {
        nombre,
        descripcion,
        precio,
        categoria,
        imagenURL,
        fecha: new Date().toISOString()
      });

      alert("Producto guardado exitosamente.");
      document.getElementById("robotAccion").innerText = "Producto guardado correctamente.";
      document.getElementById("robotMoneda").innerText = `USD: $${precio}`;
      formulario.reset();
    } catch (error) {
      console.error("Error al guardar:", error);
      alert("Error al guardar el producto.");
      document.getElementById("robotAccion").innerText = "Error al guardar.";
    }
  });
</script>
<!-- FIN DEL BLOQUE -->
<script>
  // Espera 2.5 segundos y muestra estado conectado con valores simulados
  setTimeout(() => {
    const estado = document.getElementById("robotEstado");
    const accion = document.getElementById("robotAccion");
    const moneda = document.getElementById("robotMoneda");

    if (estado && accion && moneda) {
      estado.innerText = "Robot activo y conectado.";
      accion.innerText = "Producto procesado correctamente.";
      moneda.innerText = "USD: $24.50 | Original: ¬•168";
    }
  }, 2500);
</script>
<!-- Mostrar productos sin formulario -->


<script type="module">
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
  const db = getFirestore();

  async function mostrarProductos() {
    const lista = document.getElementById("listaProductos");
    const querySnapshot = await getDocs(collection(db, "productos"));

    if (querySnapshot.empty) {
      lista.innerHTML = "<p>No hay productos para mostrar.</p>";
      return;
    }

    let html = "<h2>Inventario</h2>";
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      html += `
        <div style="border:1px solid #ccc; padding:10px; margin:10px;">
          <strong>${data.nombre}</strong><br>
          Descripci√≥n: ${data.descripcion}<br>
          Categor√≠a: ${data.categoria}<br>
          Precio: ${data.precio} USD<br>
          <img src="${data.imagenURL}" alt="${data.nombre}" style="max-width:100px;"><br>
          Fecha: ${new Date(data.fecha).toLocaleString()}
        </div>
      `;
    });

    lista.innerHTML = html;
  }

  mostrarProductos();
</script>
  <!-- Aqu√≠ va el bloque para conectar con Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_DOMINIO.firebaseapp.com",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_BUCKET.appspot.com",
    messagingSenderId: "TU_SENDER_ID",
    appId: "TU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Aqu√≠ puedes leer y mostrar datos desde Firebase si lo deseas
</script>

<!-- Aqu√≠ va el bloque para conectar con Firebase -->
<script type="module">
  // CONFIGURACI√ìN FIREBASE (usa tus datos reales)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
  apiKey: "AIzaSyCFEDVEXydQjMLkbMogH8t46umL05mMy2Y",
  authDomain: "trivostore-48031.firebaseapp.com",
  projectId: "trivostore-48031",
  storageBucket: "trivostore-48031.appspot.com",
  messagingSenderId: "470494266050",
  appId: "1:470494266050:web:a5c00eb3d202b2b48715b"
};

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
// Obtener la referencia al contenedor de productos
const lista = document.getElementById("listaProductos");

// Funci√≥n para mostrar los productos desde Firestore
async function mostrarProductos() {
  const querySnapshot = await getDocs(collection(db, "productos"));
  let html = "";

  querySnapshot.forEach((doc) => {
    const data = doc.data();
    html += `
      <div style="border:1px solid #ccc; padding:10px; margin:10px; max-width:300px;">
        <strong>${data.nombre}</strong><br>
        Descripci√≥n: ${data.descripcion}<br>
        Categor√≠a: <em>${data.categoria}</em><br>
        Precio: <span style="color:green;">$${data.precio}</span><br>
        <img src="${data.imagenURL}" alt="${data.nombre}" style="max-width:100px;"><br>
        Fecha: ${new Date(data.fecha).toLocaleString()}
      </div>
    `;
  });

  lista.innerHTML = html;
}

// Llamar a la funci√≥n cuando se cargue el m√≥dulo
mostrarProductos();
  // Puedes a√±adir l√≥gica para leer o mostrar datos aqu√≠ tambi√©n si necesitas
</script>
<!-- Conexi√≥n con Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_AUTH_DOMAIN",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_BUCKET",
    messagingSenderId: "TU_MESSAGING_ID",
    appId: "TU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Aqu√≠ puedes usar la variable `db` para leer o escribir datos
</script>
  <script>
// IA LOCAL: Clasificador de categor√≠a por palabra clave
function detectarCategoriaInteligente(nombreProducto) {
  const nombre = nombreProducto.toLowerCase();

  if (nombre.includes("zapato") || nombre.includes("tenis") || nombre.includes("sandalia")) return "Calzado";
  if (nombre.includes("camisa") || nombre.includes("pantal√≥n") || nombre.includes("blusa") || nombre.includes("ropa")) return "Ropa";
  if (nombre.includes("celular") || nombre.includes("tablet") || nombre.includes("computadora") || nombre.includes("tecnolog√≠a")) return "Tecnolog√≠a";
  if (nombre.includes("reloj") || nombre.includes("collar") || nombre.includes("accesorio")) return "Accesorios";
  if (nombre.includes("silla") || nombre.includes("mesa") || nombre.includes("hogar")) return "Hogar";
  
  return "Otros"; // Categor√≠a por defecto
}
</script>
  <script type="module">
// Inicializaci√≥n de Supabase
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabaseUrl = 'https://uzqmsbkjontizhoxvajx.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'; // Pega aqu√≠ tu clave real completa
const supabase = createClient(supabaseUrl, supabaseKey);
</script>
    actualizarEstado();
  });

  actualizarEstado();
</script>
  
  let plataformaActiva = 'firebase'; // Valor inicial

  const firebaseBtn = document.getElementById('firebaseBtn');
  const supabaseBtn = document.getElementById('supabaseBtn');
  const statusPlataforma = document.createElement('div');

  statusPlataforma.id = "plataformaStatus";
  statusPlataforma.style.fontWeight = "bold";
  statusPlataforma.style.marginTop = "10px";
  document.querySelector('.platform-toggle').after(statusPlataforma);

  
  <!-- BOTONES DE CONTROL DE PLATAFORMA -->
<div class="platform-toggle">
  <button id="firebaseBtn">Usar Firebase</button>
  <button id="supabaseBtn">Usar Supabase</button>
</div>

<script>
  let plataformaActiva = 'firebase';

  const firebaseBtn = document.getElementById('firebaseBtn');
  const supabaseBtn = document.getElementById('supabaseBtn');

  const statusPlataforma = document.createElement('div');
  statusPlataforma.id = 'plataformaStatus';
  statusPlataforma.style.fontWeight = 'bold';
  statusPlataforma.style.marginTop = '10px';
  document.querySelector('.platform-toggle').after(statusPlataforma);

  function actualizarEstado() {
    firebaseBtn.disabled = plataformaActiva === 'firebase';
    supabaseBtn.disabled = plataformaActiva === 'supabase';
    statusPlataforma.textContent = `Plataforma activa: ${plataformaActiva.charAt(0).toUpperCase() + plataformaActiva.slice(1)}`;
  }

  firebaseBtn.addEventListener('click', () => {
    plataformaActiva = 'firebase';
    actualizarEstado();
  });

  supabaseBtn.addEventListener('click', () => {
    plataformaActiva = 'supabase';
    actualizarEstado();
  });

  actualizarEstado();
</script>
<script>
// Funci√≥n para subir producto a Supabase
async function subirASupabase(producto) {
  const SUPABASE_URL = "https://<TU_URL>.supabase.co"; // Reemplaza con tu URL real
  const SUPABASE_KEY = "<TU_CLAVE_API>"; // Reemplaza con tu API KEY
  const tabla = "productos"; // Nombre de tu tabla en Supabase

  const response = await fetch(`${SUPABASE_URL}/rest/v1/${tabla}`, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "apikey": SUPABASE_KEY,
      "Authorization": `Bearer ${SUPABASE_KEY}`,
      "Prefer": "return=representation"
    },
    body: JSON.stringify(producto)
  });

  const data = await response.json();

if (response.ok) {
  console.log("Producto subido correctamente");

  const statusBox = document.createElement('div');
  statusBox.style.backgroundColor = '#000';
  statusBox.style.color = 'lime';
  statusBox.style.padding = '10px';
  statusBox.style.borderRadius = '10px';
  statusBox.style.fontFamily = 'monospace';
  statusBox.style.position = 'fixed';
  statusBox.style.bottom = '20px';
  statusBox.style.right = '20px';
  statusBox.style.zIndex = '9999';
  statusBox.innerHTML = `
    <span style="color: lime;">Robot TRIVO:</span><br>
    Robot activo y conectado.<br>
    precio: Math.round(parseFloat(precioInput.value)),
    USD: $${producto.precio.toFixed(2)} | Original: ¬•${producto.precioOriginal ?? 'N/A'}
  `;
  document.body.appendChild(statusBox);
}
    console.error("Error al subir a Supabase:", data);
    alert("Error al subir producto a Supabase");
  }
}
</script>
<script>
// Estado actual (por defecto Firebase)
productForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  const producto = {
    nombre: nombreInput.value,
    precio: parseFloat(precioInput.value),
    descripcion: descripcionInput.value
  };

  if (plataformaActiva === 'supabase') {
    await subirASupabase(producto);
  } else {
    await subirAFirebase(producto);
  }

  productForm.reset();
});
  plataformaActiva = "supabase";
  document.getElementById("estadoPlataforma").innerText = "Plataforma activa: Supabase";
  console.log("Supabase activado");
  // Aqu√≠ llamas tu funci√≥n de subida Supabase si deseas automatizar
}

// Ejemplo de c√≥mo usar la plataforma seleccionada en una funci√≥n com√∫n
function subirProducto(producto) {
  if (plataformaActiva === "firebase") {
    subirAFirebase(producto);
  } else if (plataformaActiva === "supabase") {
    subirASupabase(producto);
  }
}

// L√≥gica simulada de env√≠o a cada plataforma
function subirAFirebase(producto) {
  console.log("Producto enviado a Firebase:", producto);
}


async function subirASupabase(producto) {
  const SUPABASE_URL = "https://uzqmsbkjontizhovxvaj.supabase.co";
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV6cW1zYmtqb250aXpob3h2YWp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTk2ODkwMDYsImV4cCI6MjAxNTI2NTAwNn0.YpTXxhwWSeNGYi4Fdd_wkP5ixJMNcW_9xxnV6FHLQmk";
  const tabla = "productos";

  const response = await fetch(`${SUPABASE_URL}/rest/v1/${tabla}`, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "apikey": SUPABASE_KEY,
      "Authorization": `Bearer ${SUPABASE_KEY}`,
      "Prefer": "return=representation"
    },
    body: JSON.stringify(producto)
  });

  const data = await response.json();

  if (response.ok) {
    console.log("Producto subido correctamente");

    const statusBox = document.createElement('div');
    statusBox.style.backgroundColor = '#000';
    statusBox.style.color = 'lime';
    statusBox.style.padding = '10px';
    statusBox.style.borderRadius = '10px';
    statusBox.style.fontFamily = 'monospace';
    statusBox.style.position = 'fixed';
    statusBox.style.bottom = '20px';
    statusBox.style.right = '20px';
    statusBox.style.zIndex = '9999';
    statusBox.innerHTML = `
      <span style="color: lime;">Robot TRIVO:</span><br>
      Robot activo y conectado.<br>
      Producto procesado correctamente.<br>
      USD: $${producto.precio.toFixed(2)} | Original: ¬•${producto.precioOriginal ?? 'N/A'}
    `;
    document.body.appendChild(statusBox);

  } else {
    console.error("Error al subir producto:", data);
    alert("Error al subir producto a Supabase");
  }
}
</script>
  

<!-- Formulario de productos -->
<form id="productForm">
  <div>
    <label for="nombre">Nombre del Producto:</label>
    <input type="text" id="nombre" required>
  </div>
  <div>
    <label for="descripcion">Descripci√≥n:</label>
    <input type="text" id="descripcion" required>
  </div>
  <div>
    <label for="precio">Precio:</label>
    <input type="number" id="precio" required>
  </div>
  <div>
    <label for="categoria">Categor√≠a:</label>
    <input type="text" id="categoria" required>
  </div>
  <div>
    <label for="imagenURL">URL de la Imagen:</label>
    <input type="url" id="imagenURL" required>
  </div>
  <button type="submit">Subir Producto</button>
</form>

<div id="status"></div>

<script>
  // Configuraci√≥n de Firebase
  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_AUTH_DOMAIN",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_STORAGE_BUCKET",
    messagingSenderId: "TU_MESSAGING_SENDER_ID",
    appId: "TU_APP_ID"
  };

  // Inicializar Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Configuraci√≥n de Supabase
  const supabaseUrl = 'https://TU_SUPABASE_URL.supabase.co';
  const supabaseKey = 'TU_SUPABASE_ANON_KEY';
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  // Estado de la plataforma activa
  let activePlatform = null;

  // Referencias a los botones
  const firebaseBtn = document.getElementById('firebaseBtn');
  const supabaseBtn = document.getElementById('supabaseBtn');
  const statusDiv = document.getElementById('status');

  // Funci√≥n para actualizar el estado de los botones
  function updateButtons() {
    firebaseBtn.classList.remove('active');
    supabaseBtn.classList.remove('active');
    if (activePlatform === 'firebase') {
      firebaseBtn.classList.add('active');
      statusDiv.textContent = 'Firebase est√° activo.';
    } else if (activePlatform === 'supabase') {
      supabaseBtn.classList.add('active');
      statusDiv.textContent = 'Supabase est√° activo.';
    } else {
      statusDiv.textContent = 'Ninguna plataforma est√° activa.';
    }
  }

  // Event listeners para los botones
  firebaseBtn.addEventListener('click', () => {
    activePlatform = activePlatform === 'firebase' ? null : 'firebase';
    updateButtons();
  });

  supabaseBtn.addEventListener('click', () => {
    activePlatform = activePlatform === 'supabase' ? null : 'supabase';
    updateButtons();
  });

  // Manejo del formulario
  const productForm = document.getElementById('productForm');
  productForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const nombre = document.getElementById('nombre').value.trim();
    const descripcion = document.getElementById('descripcion').value.trim();
    const precio = parseFloat(document.getElementById('precio').value);
    const categoria = document.getElementById('categoria').value.trim();
    const imagenURL = document.getElementById('imagenURL').value.trim();
    const creado_en = new Date().toISOString();

    if (!nombre || !descripcion || isNaN(precio) || !categoria || !imagenURL) {
      statusDiv.textContent = 'Por favor, completa todos los campos correctamente.';
      return;
    }

    const producto = { nombre, descripcion, precio, categoria, imagenURL, creado_en };

    try {
      if (activePlatform === 'firebase') {
        await db.collection('productos').add(producto);
        statusDiv.textContent = 'Producto subido a Firebase exitosamente.';
      } else if (activePlatform === 'supabase') {
        const { error } = await supabase.from('productos').insert([producto]);
        if (error) throw error;
        statusDiv.textContent = 'Producto subido a Supabase exitosamente.';
      } else {
        statusDiv.textContent = 'Por favor, selecciona una plataforma antes de subir el producto.';
      }
    } catch (error) {
      console.error(error);
      statusDiv.textContent = 'Ocurri√≥ un error al subir el producto.';
    }

    productForm.reset();
  });
  <!-- ‚úÖ Selector fijo de plataforma con Supabase como predeterminado -->
<div style="margin: 20px 0;">
  <label for="plataforma" style="font-weight:bold;">üåê Plataforma activa:</label>
  <select id="plataforma" onchange="guardarPlataformaActiva()" style="padding: 5px;">
    <option value="supabase" selected>Supabase</option>
    <option value="firebase">Firebase (desactivado)</option>
  </select>
</div>

<script>
// ‚úÖ Guardar y mantener la plataforma seleccionada
function guardarPlataformaActiva() {
  const plataforma = document.getElementById('plataforma').value;
  localStorage.setItem('plataformaActiva', plataforma);
  console.log("‚úÖ Plataforma seleccionada:", plataforma);
}

// ‚úÖ Cargar plataforma activa al iniciar (mantiene Supabase fija)
window.addEventListener('load', () => {
  const plataformaGuardada = localStorage.getItem('plataformaActiva') || 'supabase';
  const selector = document.getElementById('plataforma');
  selector.value = plataformaGuardada;
  console.log("üîÅ Plataforma activa restaurada:", plataformaGuardada);
});
</script>
  <!-- ‚úÖ Bot√≥n para subir drone 4K real -->
<div style="text-align:center; margin: 20px;">
  <button onclick="subirMercancillaReal()">
    üöÅ Subir drone 4K (real)
  </button>
</div>
  <!-- üîÅ Sistema de selecci√≥n de plataforma -->
<div style="text-align:center; margin: 20px;">
  <button onclick="cambiarPlataforma('firebase')">Usar Firebase</button>
  <button onclick="cambiarPlataforma('supabase')">Usar Supabase</button>
</div>
<div style="text-align:center; font-weight: bold; margin-bottom: 20px;">
  Plataforma activa: <span id="plataformaActiva">Supabase</span>
</div>

<script>
  let plataformaActiva = 'supabase'; // plataforma por defecto

  function cambiarPlataforma(nueva) {
    plataformaActiva = nueva;
    document.getElementById('plataformaActiva').textContent =
      nueva.charAt(0).toUpperCase() + nueva.slice(1);
    localStorage.setItem('plataformaActiva', nueva);
    actualizarBotonesPlataforma();
  }

  function actualizarBotonesPlataforma() {
    document.querySelectorAll('button').forEach(btn => {
      if (btn.textContent.includes('Firebase')) {
        btn.style.backgroundColor = plataformaActiva === 'firebase' ? 'green' : '';
      }
      if (btn.textContent.includes('Supabase')) {
        btn.style.backgroundColor = plataformaActiva === 'supabase' ? 'green' : '';
      }
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const almacenada = localStorage.getItem('plataformaActiva');
    if (almacenada) {
      plataformaActiva = almacenada;
      document.getElementById('plataformaActiva').textContent =
        almacenada.charAt(0).toUpperCase() + almacenada.slice(1);
    }
    actualizarBotonesPlataforma();
  });
</script>
<!-- ‚úÖ Bot√≥n para subir producto real a Supabase -->
<div style="text-align:center; margin: 30px;">
  <button onclick="subirMercancillaReal()">
    üõí Subir patineta el√©ctrica (real)
  </button>
</div>

<script>
// ‚úÖ Configuraci√≥n de tu Supabase
const supabaseUrl = 'https://tu-url.supabase.co'; // ‚Üê Reemplaza por tu URL real
const supabaseKey = 'tu-anon-key'; // ‚Üê Reemplaza por tu API key real

// ‚úÖ Datos del producto real
function subirMercancillaReal() {
  const nombre = 'Patineta el√©ctrica X9';
  const descripcion = 'Patineta el√©ctrica con motor doble, bater√≠a de litio y suspensi√≥n.';
  const categoria = 'transporte';
  const precio = 219.99;
  const imagenURL = 'https://cbu01.alicdn.com/img/ibank/O1CN01XmQnM01ZJqeDMRgHp_!!2207880343785-0-cib.jpg';

  subirMercanciaASupabase(nombre, descripcion, categoria, precio, imagenURL);
}

// ‚úÖ Funci√≥n para subir a Supabase
async function subirMercanciaASupabase(nombre, descripcion, categoria, precio, imagenURL) {
  const { data, error } = await fetch(`${supabaseUrl}/rest/v1/mercancilla`, {
    method: 'POST',
    headers: {
      apikey: supabaseKey,
      Authorization: `Bearer ${supabaseKey}`,
      'Content-Type': 'application/json',
      Prefer: 'return=minimal'
    },
    body: JSON.stringify({
      nombre,
      descripcion,
      categoria,
      precio,
      imagen: imagenURL,
      publica: true
    })
  });

  if (error) {
    alert("‚ùå Error al subir el producto.");
    console.error(error);
  } else {
    alert("‚úÖ Producto subido correctamente a Supabase.");
  }
}
</script>
  // Inicializar el estado de los botones
  updateButtons();
<!-- ‚úÖ Bot√≥n real para subir mercancilla -->
<div style="text-align:center; margin: 30px;">
  <button onclick="subirMercancilla('Reloj cl√°sico', 'Reloj con correa de cuero', 'accesorios', 25.99, 'https://ejemplo.com/reloj.jpg')">
    üõí Subir mercancilla de ejemplo
  </button>
</div>

<script>
// ‚úÖ Lista de palabras prohibidas
const palabrasProhibidas = [
  "arma", "pistola", "rifle", "bala", "droga", "imitaci√≥n", "r√©plica",
  "explosivo", "granada", "fuego", "falsificado", "marca registrada"
];

// ‚úÖ Verifica si est√° prohibida
function esMercancillaProhibida(nombre, descripcion, categoria) {
  const texto = (nombre + " " + descripcion + " " + categoria).toLowerCase();
  return palabrasProhibidas.some(palabra => texto.includes(palabra));
}

// üîê Configura Supabase
const SUPABASE_URL = "https://TUSUPABASE.supabase.co";
const SUPABASE_KEY = "eyTU_CLAVE_PUBLICA";
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// ‚úÖ Funci√≥n real de subida
async function subirMercancilla(nombre, descripcion, categoria, precio, imagenURL) {
  if (esMercancillaProhibida(nombre, descripcion, categoria)) {
    alert("‚ö†Ô∏è Esta mercancilla no puede ser subida. Contiene contenido restringido.");
    return;
  }

  const { data, error } = await supabase
    .from("mercancilla")
    .insert([{ nombre, descripcion, categoria, precio, imagenURL }]);

  if (error) {
    console.error("‚õî Error al subir:", error);
    alert("‚õî Error al subir la mercancilla.");
  } else {
    console.log("‚úÖ Mercancilla subida:", data);
    alert("‚úÖ Mercancilla subida correctamente.");
  }
}
</script>
  <!-- ‚úÖ Bot√≥n de simulaci√≥n para pruebas -->
<div style="text-align:center; margin: 30px;">
  <button onclick="subirMercancilla('Reloj cl√°sico', 'Reloj con correa de cuero', 'accesorios', 25.99, 'https://ejemplo.com/reloj.jpg')">
    üõí Subir mercancilla de ejemplo
  </button>
</div>
<script>
// ‚úÖ Lista de palabras prohibidas
const palabrasProhibidas = ["arma", "pistola", "rifle", "bala", "droga", "imitaci√≥n", "r√©plica", "explosivo", "granada", "fuego", "falsificado", "marca registrada"];

// ‚úÖ Funci√≥n que detecta si la mercancilla es peligrosa
function esMercancillaProhibida(nombre, descripcion, categoria) {
  const texto = (nombre + " " + descripcion + " " + categoria).toLowerCase();
  return palabrasProhibidas.some(palabra => texto.includes(palabra));
}

// üîë Configura tu Supabase
const SUPABASE_URL = "https://TUSUPABASE.supabase.co"; // <-- reemplaza esto
const SUPABASE_KEY = "eyTU_CLAVE_PUBLICA"; // <-- reemplaza esto
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// ‚úÖ Funci√≥n para subir mercancilla segura
async function subirMercancilla(nombre, descripcion, categoria, precio, imagenURL) {
  if (esMercancillaProhibida(nombre, descripcion, categoria)) {
    alert("‚õî Esta mercancilla no puede ser subida. Contiene palabras prohibidas.");
    return;
  }

  const { data, error } = await supabase
    .from("mercancilla") // <-- Aseg√∫rate que tu tabla se llama as√≠
    .insert([{ nombre, descripcion, categoria, precio, imagenURL }]);

  if (error) {
    console.error("üö´ Error al subir:", error);
    alert("Error al subir la mercancilla.");
  } else {
    console.log("‚úÖ Mercancilla subida:", data);
    alert("‚úÖ Mercancilla subida correctamente.");
  }
}
</script> 
  <!-- CONTENEDOR DE PRODUCTOS -->
<div id="contenedor-productos" style="display: flex; flex-wrap: wrap; gap: 20px; padding: 20px;"></div>

<!-- SCRIPT PARA CARGAR PRODUCTOS DESDE SUPABASE -->
<script type="module">
  const supabaseUrl = "https://uzqmsbkjontizhoxvajx.supabase.co";
  const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV6cW1zYmtqb250aXpob3h2YWp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzMDY1NjYsImV4cCI6MjA2Mzg4MjU2Nn0.RtiBzB0k0qzFzsfgUZcIvW1eyu2VmVbEolCWQDkDwbU";

  const { createClient } = supabase;
  const supabaseClient = createClient(supabaseUrl, supabaseKey);

  async function cargarProductos() {
    const contenedor = document.getElementById("contenedor-productos");
    const { data: productos, error } = await supabaseClient.from("mercancilla").select("*");

    if (error) {
      contenedor.innerHTML = `<p style="color:red;">Error al cargar productos: ${error.message}</p>`;
      return;
    }

    if (!productos || productos.length === 0) {
      contenedor.innerHTML = "<p>No hay productos disponibles.</p>";
      return;
    }

    productos.forEach((producto) => {
      const card = document.createElement("div");
      card.style = "width: 250px; border: 1px solid #ccc; padding: 15px; border-radius: 10px;";
      card.innerHTML = `
        <img src="${producto.imagenURL}" alt="${producto.nombre}" style="width: 100%; height: 200px; object-fit: cover;">
        <h3>${producto.nombre}</h3>
        <p style="color: #555;">${producto.descripcion || "Sin descripci√≥n"}</p>
        <strong>Precio: $${producto.precio}</strong>
      `;
      contenedor.appendChild(card);
    });
  }

  cargarProductos();
</script>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm"></script>
</body>
</html>

